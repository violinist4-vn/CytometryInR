<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Rach">
<meta name="dcterms.date" content="2026-01-21">

<title>Using Floreada – Cytometry in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../Schedule.html" rel="next">
<link href="../../course/00_Homeworks/index.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-8eaec6b9941db0f18eecf13b95a46332.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LZ35J3XE4D"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-LZ35J3XE4D', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/hex.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Cytometry in R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../course/index.html"> 
<span class="menu-text">Course</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/UMGCCCFCSR/CytometryInR"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../course/00_GitHub/index.html">Getting Started</a></li><li class="breadcrumb-item"><a href="../../course/00_Floreada/index.html">00 - Floreada</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
  <div id="quarto-announcement" data-announcement-id="1b0d00193ccb239f289fa2c2a7d8c198" class="alert alert-info hidden"><i class="bi bi-info-circle quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p>Course will start week of February 1st. Workstation setup tutorials are now available.</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course/00_GitHub/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00 - GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course/00_WorkstationSetup/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00 - Workstation Setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course/00_Positron/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00 - Positron</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course/00_Git/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00 - Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course/00_Quarto/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00 - Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course/00_Homeworks/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00 - Getting Help</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../course/00_Floreada/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">00 - Floreada</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Intro to R</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Cytometry Core</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Beyond the Sandbox</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">The World is your Oyster</span></span>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#walk-through" id="toc-walk-through" class="nav-link" data-scroll-target="#walk-through">Walk-through</a>
  <ul>
  <li><a href="#floreada" id="toc-floreada" class="nav-link" data-scroll-target="#floreada">Floreada</a>
  <ul>
  <li><a href="#loading-dataset" id="toc-loading-dataset" class="nav-link" data-scroll-target="#loading-dataset">Loading Dataset</a></li>
  <li><a href="#switching-axis-markers" id="toc-switching-axis-markers" class="nav-link" data-scroll-target="#switching-axis-markers">Switching Axis Markers</a></li>
  <li><a href="#creating-gates" id="toc-creating-gates" class="nav-link" data-scroll-target="#creating-gates">Creating Gates</a></li>
  <li><a href="#additional-gates" id="toc-additional-gates" class="nav-link" data-scroll-target="#additional-gates">Additional Gates</a></li>
  <li><a href="#scalingtransformation" id="toc-scalingtransformation" class="nav-link" data-scroll-target="#scalingtransformation">Scaling/Transformation</a></li>
  <li><a href="#navigating-gating-hierarchy" id="toc-navigating-gating-hierarchy" class="nav-link" data-scroll-target="#navigating-gating-hierarchy">Navigating Gating Hierarchy</a></li>
  <li><a href="#copying-gates" id="toc-copying-gates" class="nav-link" data-scroll-target="#copying-gates">Copying Gates</a></li>
  <li><a href="#saving-workspace" id="toc-saving-workspace" class="nav-link" data-scroll-target="#saving-workspace">Saving Workspace</a></li>
  <li><a href="#reopening-workspace" id="toc-reopening-workspace" class="nav-link" data-scroll-target="#reopening-workspace">Reopening Workspace</a></li>
  </ul></li>
  <li><a href="#cytoml" id="toc-cytoml" class="nav-link" data-scroll-target="#cytoml">CytoML</a></li>
  </ul></li>
  <li><a href="#wrap-up" id="toc-wrap-up" class="nav-link" data-scroll-target="#wrap-up">Wrap-up</a></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources">Additional Resources</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../course/00_GitHub/index.html">Getting Started</a></li><li class="breadcrumb-item"><a href="../../course/00_Floreada/index.html">00 - Floreada</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Using Floreada</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>David Rach </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 21, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><img src="../../images/WebsiteBanner.png" class="img-fluid"></p>
<div style="text-align: right;">
<p><a href="https://www.gnu.org/licenses/agpl-3.0.en.html"><img src="https://img.shields.io/badge/license-AGPLv3-blue.png" class="img-fluid" alt="AGPL-3.0"></a> <a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://img.shields.io/badge/License-CC%20BY--SA%204.0-lightgrey.svg" class="img-fluid" alt="CC BY-SA 4.0"></a></p>
</div>
<p>For screen-shot slides, click <a href="../../course/00_Floreada/slides.html">here</a></p>
<p>For the YouTube narration, click <a href="https://www.youtube.com/@CytometryInR">here</a></p>
<section id="background" class="level1">
<h1>Background</h1>
<p>As a “Cytometry in R” course, we will primarily be working in R. However, within our daily workflows and projects here at our flow cytometry core, we often use various flow cytometry softwares (like <a href="https://flowjo.com/flowjo10/download">FlowJo</a> or <a href="https://denovosoftware.com/">FCS Express</a>) for various tasks. Fortunately, R packages like <a href="https://www.bioconductor.org/packages/release/bioc/html/CytoML.html">CytoML</a> can allow us to import our manually drawn gates from existing FlowJo workspaces so that we can work with them in R.</p>
<p>For this course, we are adamant about staying neutral in regards to both commercial software or instrument vendors as much as possible. If they have worked with the open-source community to make their files readable and accessible via R, we will showcase how to integrate those tools into your own workflows. At the same time, this being a <u><strong>free</strong></u> course, it doesn’t make sense to turn around and ask you to go and either free trial or buy an expensive software license just to see how a particular free R package works.</p>
<p>Fortunately, for showing how to use this <a href="https://www.bioconductor.org/packages/release/bioc/html/CytoML.html">CytoML</a> functionality, we can use <a href="https://floreada.io/">Floreada.io</a>. It is a simple (but free) web-based analysis platform that can be used to draw manual gates for your .fcs files of interest. These can then be saved as Floreada workspaces for later use. We typically recommend it to users from labs that do flow experiments infrequently. Fortunately thanks to the hard work of its <a href="https://floreada.io/about">developers</a>, it can also save the gated files as <a href="https://flowjo.com/flowjo10/download">FlowJo</a> v10 .wsp files, which with a small workaround become usable within the <a href="https://www.bioconductor.org/packages/release/bioc/html/CytoML.html">CytoML</a> pipeline.</p>
<p>To facilitate this, we will provide a small walk-through of how to use it for those who want to create a .wsp with their own .fcs files for <a href="https://umgccfcss.github.io/CytometryInR/Schedule#gating-sets">Week 5</a>.</p>
</section>
<section id="walk-through" class="level1">
<h1>Walk-through</h1>
<section id="floreada" class="level2">
<h2 class="anchored" data-anchor-id="floreada">Floreada</h2>
<section id="loading-dataset" class="level3">
<h3 class="anchored" data-anchor-id="loading-dataset">Loading Dataset</h3>
<p>First, open your web browser and navigate to the <a href="https://floreada.io/">website</a></p>
<p>Click on Start to proceed to the next page.</p>
<p><img src="images/01_LandingPage.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p><img src="images/02_InitialPage.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Once that is done, select the File tab on the upper navigation bar. Then click on Open File(s).</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/03_OpenFiles.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p><br></p>
<hr>
<p>From there, select your .fcs files of interest, and click Open.</p>
<p><img src="images/04_SelectFCSFiles.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>The .fcs files will now load in, and you should see a view similar to the one below. On the left side-bar, you have your gating options (Rectangle, Polygon, Range, Elipse, Quad, etc). Next to these on the right you have the FCS files that are loaded into the workspace. Then on the right, you have the visual display for your selected specimen.</p>
<p><img src="images/05_InitialFiles.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
<section id="switching-axis-markers" class="level3">
<h3 class="anchored" data-anchor-id="switching-axis-markers">Switching Axis Markers</h3>
<p>If you left click on the axis name (SSC-H or FSC-H in this case), you will be able to select other markers by which to gate your specimen. For the provided example, we were using a raw spectral flow cytometry .fcs file, so the names of the detectors are present.</p>
<p><img src="images/06_LeftClick.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>For now, I plan to start off by gating for singlets. I switch the y-axis to FSC-H, and then proceed to switch the x-axis to FSC-A.</p>
<p><img src="images/07_LeftClickXaxis.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
<section id="creating-gates" class="level3">
<h3 class="anchored" data-anchor-id="creating-gates">Creating Gates</h3>
<p>With this done, I can now select the Poly gate tab on the upper left.</p>
<p><img src="images/08_PolygonGateSelect.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Then manually click on the locations on the plot to add the individual gate nodes.</p>
<p><img src="images/08_PolygonGateStart.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>To complete the gate, I click back to the original node point. At this point, the popup will allow you to name the gate.</p>
<p><img src="images/08_PolygonGateCreate.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>To adjust the polygon gate, you can click on a node and drag it to expand or contract in a particular direction</p>
<p><img src="images/08_PolygonGateNode.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>To move the entire gate, first click on a node to select the gate, then click in the center of the gate to adjust its location.</p>
<p><img src="images/08_PolygonGateCenter.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
<section id="additional-gates" class="level3">
<h3 class="anchored" data-anchor-id="additional-gates">Additional Gates</h3>
<p>Unfortunately for those with the force-of-habit from using other softwares, double-clicking within the gate doesn’t do anything. To continue gating on the selected cells, you will need to click on the newly created gate name on the left. This will result in visualizing the isolated cells.</p>
<p><img src="images/09_SecondLanding.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Once this is done, you can repeat the previous steps to change the axis markers and create a second gate. For this example, we went with a “Cells” gate to exclude debris from this particular sample.</p>
<p><img src="images/09_SecondGate.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Having created the “Cells” gate, we will be switching gating based on FSC and SSC to using the detector parameters.</p>
<p>The samples in this example were acquired to derive the cell counts and concentration of various cell populations within cryopreserved cord and peripheral blood mononuclear cells (CBMC and PBMC) specimens after thawing.</p>
<p>They were stained with CD19 BV421, CD45 PE, and CD14 APC on a <a href="https://spectrum.cytekbio.com/">5-Laser Cytek Aurora</a>, before unmixing, this would correspond respectively to V1, YG1/B4, R1/YG4 peaks respectively.</p>
<p><br></p>
<hr>
</section>
<section id="scalingtransformation" class="level3">
<h3 class="anchored" data-anchor-id="scalingtransformation">Scaling/Transformation</h3>
<p>When we switch the axis, we can see that the scaling/transformation is not ideal, as the staining and not-staining populations are scrunched up together in the center of the plot.</p>
<p><img src="images/10_Untransformed.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>To change the scaling/transformation, we need to click directly on the axis.</p>
<p><img src="images/10_ClickGrid.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>From there, when we click on the drop-down, we see the various transformation options. We will select <a href="https://pubmed.ncbi.nlm.nih.gov/16604519/">Logicle</a>, given we are working with spectral flow cytometry files.</p>
<p><img src="images/10_SelectLogicle.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>This y-axis values are subsequently visualized with the logicle transformation applied, increasing our resolution between the positive and negative population.</p>
<p><img src="images/10_LogicleY.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>We can then repeat this for the x-axis, adjusting the fine-tune options for the scaling as needed.</p>
<p><img src="images/10_DoubleLogicleAxis.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
<section id="navigating-gating-hierarchy" class="level3">
<h3 class="anchored" data-anchor-id="navigating-gating-hierarchy">Navigating Gating Hierarchy</h3>
<p>With this done, let’s first draw a rectangle gate for the CD45+ (B4-A) cells.</p>
<p><img src="images/10_CD45Gate.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>And then selecting that population by clicking on the gate name, let’s proceed and gate the CD19+ cells (V2-A).</p>
<p><img src="images/10_CD19Gate.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>As you can see, we now have the various gates present in the gating hierarchy for the respective .fcs file. To return to a previous gated population, we would click on the parent population above it.</p>
<p><img src="images/11_ReturnToPrevious.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>We can subsequently add an additional gate at this gating level for the likely debris population (the threshold setting was suboptimal for this experimental run).</p>
<p><img src="images/11_AdditionalGates.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
<section id="copying-gates" class="level3">
<h3 class="anchored" data-anchor-id="copying-gates">Copying Gates</h3>
<p>This was the process for gating for a single specimen. To copy gates over to the other specimens, we have two options. First, holding down your Ctrl (or equivalent) button, you can click on the individual gate names.</p>
<p><img src="images/11_ControlHighlight.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>From there, you can drag them down to the next specimen and apply them.</p>
<p><img src="images/11_ApplyToNext.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Alternatively, you can drag down the highlighted gated to the Pipelines Tab, and apply to All Files. This will result in the gates being copied to all specimens in the experiment.</p>
<p><img src="images/11_ApplyAllViaPipelines.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p><img src="images/13_PipelineAdjustAll.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Adjustments within Pipelines will carry over to all other respective unmodified specimens that share it’s gates.</p>
<p><img src="images/13_PipelineAdjustCD19.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Once this is done, I recommend cycling through the gates for each specimen, just to ensure that the gates were positioned correctly before saving the workspace.</p>
<p><img src="images/12_ClickAdjust.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
<section id="saving-workspace" class="level3">
<h3 class="anchored" data-anchor-id="saving-workspace">Saving Workspace</h3>
<p>With everyone now “correctly” gated, we can proceed to save the workspace so that we can reopen it later from another browser.</p>
<p>To do this we open the File tab from the upper navigation bar, and select Save Workspace.</p>
<p><img src="images/14_SaveWorkspace.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>From there we have a couple options, for now let’s select Floreada Workspace. Where it is saved at will depend on your individual browser settings, so watch for a popup.</p>
<p><img src="images/14_FloreadaWorkspace.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>Alternatively (and crucially for the CytoML pipeline) we can also choose to save it as a FlowJo v10 .wsp file.</p>
<p><img src="images/14_FlowJoWorkspace.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>In both cases, you will end up with Workspace files that can be used later to access your created gates</p>
<p><img src="images/WorkspaceFiles.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
<section id="reopening-workspace" class="level3">
<h3 class="anchored" data-anchor-id="reopening-workspace">Reopening Workspace</h3>
<p>To reopen the Floreada workspace within the browser, reopen the website, and select the Open File(s) option.</p>
<p><img src="images/15_Reopening.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>From there, select both the Floreada Workspace file as well as the .fcs files</p>
<p><img src="images/15_ReopeningSelectAll.png" class="img-fluid"></p>
<p><br></p>
<hr>
<p>At which point you will now be back to the point you last saved at.</p>
<p><img src="images/15_ReopenedWorkspace.png" class="img-fluid"></p>
<p><br></p>
<hr>
</section>
</section>
<section id="cytoml" class="level2">
<h2 class="anchored" data-anchor-id="cytoml">CytoML</h2>
<p>Due to a unknown formatting bug, the Floreada produced FlowJo v10 .wsp is not directly accessible by CytoML at the time of this course. However, the issue is resolved as soon as the file is opened the first time within FlowJo v10, regardless of whether you have a log in or not. Strange? Yes, but we will take the workaround.</p>
<p>So, for anyone on Windows or MacOS, download <a href="https://www.flowjo.com/flowjo10/overview">FlowJo v10</a>. Once installed, open the software, and close the login popups. Once there, open the Floreada created FlowJo.wsp file. Since you haven’t logged in, it won’t show any events. But it will correct the formatting bug. Close the software, and return to R. Your Floreada sourced .WSP file should now be readable by CytoML.</p>
<p>Odd? For sure. Fixable? Likely, I will set a reminder to work with the Floreada and CytoML devs to see if we can cut out the need for this workaround.</p>
</section>
</section>
<section id="wrap-up" class="level1">
<h1>Wrap-up</h1>
</section>
<section id="additional-resources" class="level1">
<h1>Additional Resources</h1>
<p><a href="https://floreada.io/docs/">Floreada Documentation</a></p>
<div style="text-align: right;">
<p><a href="https://www.gnu.org/licenses/agpl-3.0.en.html"><img src="https://www.gnu.org/graphics/agplv3-with-text-162x68.png" class="img-fluid" alt="AGPL-3.0"></a> <a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png" class="img-fluid" alt="CC BY-SA 4.0"></a></p>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../course/00_Homeworks/index.html" class="pagination-link" aria-label="00 - Getting Help">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">00 - Getting Help</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../Schedule.html" class="pagination-link" aria-label="Intro to R">
        <span class="nav-page-text">Intro to R</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Made with <a href="https://quarto.org/">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><img src="../../images/AGPL3.png" class="img-fluid" alt="AGPL-3.0"> <img src="../../images/CCBYSA.png" class="img-fluid" alt="CC-BY-SA"></p>
</div>
  </div>
</footer>




</body></html>